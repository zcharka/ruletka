<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ruletka</title>
  <style>
    :root{
      --bg1:#0f172a;
      --bg2:#1e293b;
      --accent:#22d3ee;
      --glass: rgba(255,255,255,0.08);
      --glass-border: rgba(255,255,255,0.15);
      --red:#ef4444;
      --black:#111827;
      --green:#10b981;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    body{
      background: radial-gradient(1200px 800px at 20% -10%, #0ea5e9 0%, transparent 60%),
                  radial-gradient(1000px 600px at 110% 10%, #22c55e 0%, transparent 55%),
                  linear-gradient(120deg, var(--bg1), var(--bg2));
      color:#e5e7eb;
      overflow:hidden;
      display:grid;
      place-items:center;
      padding:20px;
    }
    .card{width:min(100%,980px);background:var(--glass);backdrop-filter: blur(14px);
      border:1px solid var(--glass-border);border-radius:24px;box-shadow:0 30px 60px rgba(0,0,0,.35);
      padding:24px 24px 32px}
    h1{margin:0 0 8px;font-size:clamp(22px,2.8vw,36px)}
    .sub{opacity:.8;margin:0 0 18px}

    .layout{display:grid;grid-template-columns:1.1fr .9fr;gap:26px}
    @media (max-width: 900px){.layout{grid-template-columns:1fr;gap:18px}}

    .wheel-wrap{display:grid;place-items:center;padding:10px}
    .wheel{
      position:relative;width:min(520px,90vw);aspect-ratio:1/1;border-radius:50%;
      box-shadow: inset 0 0 0 10px rgba(0,0,0,.4), inset 0 0 0 18px rgba(255,255,255,.06), 0 20px 50px rgba(0,0,0,.45);
      transform:rotate(0deg);transition: transform 4.2s cubic-bezier(.1,.9,.1,1);
    }
    .wheel::after{content:"";position:absolute;inset:18%;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0) 35%), radial-gradient(circle at 70% 70%, rgba(0,0,0,.35), rgba(0,0,0,0) 40%);}
    .pointer{width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;border-bottom:24px solid var(--accent);margin-bottom:-8px}

    .controls{background:rgba(0,0,0,.25);border:1px solid var(--glass-border);border-radius:16px;padding:16px;display:grid;gap:12px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row3{display:grid;grid-template-columns: 1fr auto; gap:10px}
    .label{font-size:14px;opacity:.9;margin-bottom:4px}
    select,input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.3);color:#e5e7eb;outline:none}
    button{padding:12px 16px;border:none;border-radius:14px;background:linear-gradient(135deg,#22d3ee,#3b82f6);color:#00131a;font-weight:700;cursor:pointer;box-shadow:0 10px 20px rgba(59,130,246,.35)}
    .stats{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
    .pill{background:rgba(255,255,255,.08);border:1px solid var(--glass-border);padding:10px 14px;border-radius:999px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Ruletka ðŸŽ°</h1>
    <p class="sub">Wybierz kolor, wpisz stawkÄ™ i krÄ™Ä‡</p>
    <div class="layout">
      <div class="wheel-wrap">
        <div class="pointer"></div>
        <div class="wheel" id="wheel"></div>
      </div>
      <div class="controls">
        <div class="row">
          <div>
            <div class="label">ZakÅ‚ad</div>
            <select id="betType">
              <option value="red">Czerwone (x2)</option>
              <option value="black">Czarne (x2)</option>
              <option value="green">Zielone (x14)</option>
            </select>
          </div>
          <div>
            <div class="label">Stawka</div>
            <input id="stake" type="number" min="1" step="1" value="50" />
          </div>
        </div>
        <div class="row3">
          <div class="stats">
            <div class="pill">Saldo: <strong><span id="balance">1000</span> zÅ‚</strong></div>
            <div class="pill">Ostatnia wygrana: <strong><span id="lastWin">0</span> zÅ‚</strong></div>
          </div>
          <button id="spinBtn">KrÄ™Ä‡!</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const N = 37;
    const sectorAngle = 360 / N;
    const colors = Array.from({length:N}, (_,i)=> i===0? 'green' : (i%2?'red':'black'));
    const wheel = document.getElementById('wheel');
    let currentRotation = 0;

    function paintWheel(){
      const stops = colors.map((c,i)=>{
        const a0 = (i*sectorAngle).toFixed(4);
        const a1 = ((i+1)*sectorAngle).toFixed(4);
        const color = c==='green'? getComputedStyle(document.documentElement).getPropertyValue('--green')
                   : c==='red'? getComputedStyle(document.documentElement).getPropertyValue('--red')
                   : getComputedStyle(document.documentElement).getPropertyValue('--black');
        return `${color} ${a0}deg ${a1}deg`;
      }).join(', ');
      wheel.style.background = `conic-gradient(from -90deg, ${stops})`;
    }
    paintWheel();

    const betTypeEl = document.getElementById('betType');
    const stakeEl = document.getElementById('stake');
    const spinBtn = document.getElementById('spinBtn');
    const balanceEl = document.getElementById('balance');
    const lastWinEl = document.getElementById('lastWin');
    let balance = 1000;

    function clampStake(){
      let v = parseInt(stakeEl.value,10);
      if(isNaN(v) || v<1) v=1;
      if(v>1000000) v=1000000;
      stakeEl.value = v;
      return v;
    }

    function spin(){
      const type = betTypeEl.value;
      const stake = clampStake();
      if(balance < stake){alert("Nie masz wystarczajÄ…cych Å›rodkÃ³w!");return;}

      balance -= stake;
      balanceEl.textContent = balance;

      const spins = 6 + Math.floor(Math.random()*3);
      const finalRotation = currentRotation + spins*360 + Math.random()*360;

      requestAnimationFrame(()=>{
        wheel.style.transition = 'transform 4.2s cubic-bezier(.1,.9,.1,1)';
        wheel.style.transform = `rotate(${finalRotation}deg)`;
      });

      setTimeout(()=>{
        currentRotation = finalRotation % 360;

        // Obliczamy faktyczny sektor pod wskaÅºnikiem
        let angleFromTop = (360 - (currentRotation % 360) + 90) % 360;
        let landedIndex = Math.floor(angleFromTop / sectorAngle) % N;
        const landedColor = colors[landedIndex];

        let win = 0;
        if(type==='green' && landedColor==='green') win=stake*14;
        if(type==='red' && landedColor==='red') win=stake*2;
        if(type==='black' && landedColor==='black') win=stake*2;

        balance += win;
        balanceEl.textContent = balance;
        lastWinEl.textContent = win;
      },4300);
    }

    spinBtn.addEventListener('click', ()=>{
      spinBtn.disabled=true;spinBtn.textContent='KrÄ™ci...';
      spin();
      setTimeout(()=>{spinBtn.disabled=false;spinBtn.textContent='KrÄ™Ä‡!'},4600);
    });
  </script>
</body>
</html>
